CFLAGS = -g -Wall -Wextra -pedantic -std=c18
CXXFLAGS = -std=c++17

INCLUDE_DIR = include
SRC_DIR = src
TEST_DIR = test



test_tools.o: $(TEST_DIR)/test_tools.c $(TEST_DIR)/test_tools.h
	gcc $(CFLAGS) -c $<

# MVEC-------------------------------------------
mvec_test: test_tools.o $(TEST_DIR)/mvec_test.c \
			$(INCLUDE_DIR)/mstruct/mvec.h
	gcc $(CFLAGS) -o mvec_test test_tools.o $(TEST_DIR)/mvec_test.c

mvec_test_cpp: test_tools.o $(MALG_INC_DIR)/mvec.h $(TEST_DIR)mvec_test.c
	g++ $(CXXFLAGS) -o mvec_test_cpp test_tools.o mvec_test.c

vec_comp: $(TEST_DIR)/vec_test.cpp
	g++ $(CXXFLAGS) -o vec_comp vec_test.cpp

.PHONY: mvec_clean
mvec_clean:
	rm -f mvec_test mvec_test_cpp vec_comp

# -----------------------------------------------

# MDLLIST----------------------------------------
mdll_test: $(MSTRUCT_INC_DIR)/mdll.h mdll_test.c
	gcc $(CFLAGS) -o mdll_test mdll_test.c

.PHONY: mdll_clean
mdll_clean:
	rm -f mdll_test

# -----------------------------------------------

# MEPUTIL----------------------------------------
meputil.o: $(MALG_INC_DIR)/meputil.c $(MALG_INC_DIR)/meputil.h
	gcc $(CFLAGS) -c $(MALG_INC_DIR)/meputil.c

meputil_test: test_tools.o meputil.o $(MSTRUCT_INC_DIR)/mvec.h meputil_test.c 
	gcc $(CFLAGS) -o meputil_test test_tools.o meputil.o meputil_test.c -lm 

.PHONY: meputil_clean
meputil_clean: 
	rm -f meputil_test
# -----------------------------------------------

# MEPSORT----------------------------------------
mepsort_test: test_tools.o meputil.o $(MALG_INC_DIR)/mepsort.h mepsort_test.c
	gcc $(CFLAGS) -o mepsort_test test_tools.o meputil.o mepsort_test.c

.PHONY: mepsort_clean
mepsort_clean:
	rm -f mepsort_test

# -----------------------------------------------

# MVEB-------------------------------------------
mveb.o: $(MSTRUCT_INC_DIR)/mveb.h $(MSTRUCT_INC_DIR)/mveb.c
	gcc $(CFLAGS) -c $(MSTRUCT_INC_DIR)/mveb.c

mveb_test: test_tools.o meputil.o mveb.o $(MALG_INC_DIR)/mepsort.h mveb_test.c
	gcc $(CFLAGS) -o mveb_test test_tools.o meputil.o mveb.o mveb_test.c

.PHONY: mveb_clean
mveb_clean:
	rm -f mveb_test


# -----------------------------------------------

# MVIB-------------------------------------------
mbiv.o: $(MSTRUCT_INC_DIR)/mbiv.h $(MSTRUCT_INC_DIR)/mbiv.c
	gcc $(CFLAGS) -c $(MSTRUCT_INC_DIR)/mbiv.c

mbiv_test: test_tools.o meputil.o mbiv.o mbiv_test.c
	gcc $(CFLAGS) -o mbiv_test test_tools.o meputil.o mbiv.o mbiv_test.c


# -----------------------------------------------

hash_test: meputil.o hash_test.c
	gcc $(CFLAGS) -o hash_test meputil.o hash_test.c

.PHONY: clean-all
clean-all:
	rm -f *_test *.o
 
